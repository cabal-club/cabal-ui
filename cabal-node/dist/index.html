<!DOCTYPE html>
<html>
<head>
  <meta charset='utf-8'>
  <meta http-equiv='X-UA-Compatible' content='IE=edge'>
  <title>Cabal</title>
  <meta name='viewport' content='width=device-width, initial-scale=1'>
</head>
<body>
  <h1>Cabal</h1>
  <script>
    // let url = new URL(window.location.href)
    // url.protocol = url.protocol.replace('https:', 'wss:').replace('http:', 'ws:')
    
    // let parts = window.location.href.split('/')
    // let cabalKey = parts[parts.length - 2]

    // function init() {
    //   websocket = new WebSocket(url.href)
    //   websocket.onopen = function () { 
    //     console.log('open', url.href)
    //     websocket.send(JSON.stringify({
    //       type: 'render:cabal-join',
    //       data: {
    //         cabalKey: cabalKey
    //       }
    //     }))
    //   }

    //   websocket.onclose = function(evt) { console.log(evt) }
    //   websocket.onerror = function(evt) { console.log(evt) }
      
    //   websocket.onmessage = function (message) {
    //     const message = JSON.parse(msg.data)
    //     console.log(message)
    //     if (message.type) {
    //       eventEmitter.emit(message.type, message.data)
    //     }
    //   }
    // }

    // window.addEventListener("load", init, false)
  </script>
</body>
</html>